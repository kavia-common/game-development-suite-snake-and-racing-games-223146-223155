{"is_source_file": true, "format": "JavaScript (JSX)", "description": "This source file defines a React functional component named 'BuildingBlocks' which implements a simple stacking blocks game using HTML5 Canvas. It manages game state, rendering, and user interactions for gameplay including moving/timing of blocks, collision detection, score tracking, and game over handling.", "external_files": ["react"], "external_methods": ["React.useRef", "React.useState", "React.useEffect"], "published": ["BuildingBlocks"], "classes": [], "methods": [{"name": "init()", "description": "Initializes the game state, creating the base block, resetting scores, and spawning the first moving block.", "scope": "BuildingBlocks", "scopeKind": "function"}, {"name": "reset()", "description": "Re-initializes the game to its starting state.", "scope": "BuildingBlocks", "scopeKind": "function"}, {"name": "createMovingBlock()", "description": "Creates a new moving block at the top of the game area with random starting position and color.", "scope": "BuildingBlocks", "scopeKind": "function"}, {"name": "dropBlock()", "description": "Sets the current moving block to falling, initiating its descent.", "scope": "BuildingBlocks", "scopeKind": "function"}, {"name": "update(dt)", "description": "Updates the game state based on elapsed time, moving the current block, checking for collisions, and handling game over if missed.", "scope": "BuildingBlocks", "scopeKind": "function"}, {"name": "topOfStack()", "description": "Returns the topmost stacked block in the current blocks array.", "scope": "BuildingBlocks", "scopeKind": "function"}, {"name": "rectsOverlap(a, b)", "description": "Determines if two rectangles overlap, used for collision detection.", "scope": "BuildingBlocks", "scopeKind": "function"}, {"name": "drawBlock(ctx, b)", "description": "Renders a single block with gradient and shadow effects on the canvas context.", "scope": "BuildingBlocks", "scopeKind": "function"}, {"name": "draw(ctx)", "description": "Handles rendering of the background, score, blocks, and game over overlay.", "scope": "BuildingBlocks", "scopeKind": "function"}, {"name": "BuildingBlocks({ width = 400, height = 600 })", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["requestAnimationFrame(loop)", "cancelAnimationFrame(rafRef.current)", "canvas?.addEventListener(\"click\", onClick)", "canvas?.removeEventListener(\"click\", onClick)", "setScore", "setGameOver", "setRunning", "createMovingBlock", "init"], "search-terms": ["BuildingBlocks", "stacking blocks game", "HTML5 canvas game", "React block game", "game over handling", "block collision detection", "requestAnimationFrame", "React hooks"], "state": 2, "file_id": 32, "knowledge_revision": 112, "git_revision": "", "ctags": [{"_type": "tag", "name": "0", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^          tabIndex={0}$/", "language": "JavaScript", "kind": "field", "scope": "BuildingBlocks.tabIndex", "scopeKind": "class"}, {"_type": "tag", "name": "BuildingBlocks", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^export default function BuildingBlocks({ width = 400, height = 600 }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ width = 400, height = 600 })"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^    const base = {$/", "language": "JavaScript", "kind": "class", "scope": "BuildingBlocks.init", "scopeKind": "class"}, {"_type": "tag", "name": "canvasRef", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^          ref={canvasRef}$/", "language": "JavaScript", "kind": "field", "scope": "BuildingBlocks.ref", "scopeKind": "class"}, {"_type": "tag", "name": "color", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^            color: mb.color,$/", "language": "JavaScript", "kind": "property", "scope": "BuildingBlocks.update.snapped", "scopeKind": "class"}, {"_type": "tag", "name": "color", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^      color: \"#1E3A8A\",$/", "language": "JavaScript", "kind": "property", "scope": "BuildingBlocks.init.base", "scopeKind": "class"}, {"_type": "tag", "name": "createMovingBlock", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^  function createMovingBlock() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "BuildingBlocks", "scopeKind": "function"}, {"_type": "tag", "name": "current", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^    movingRef.current = {$/", "language": "JavaScript", "kind": "class", "scope": "movingRef", "scopeKind": "class"}, {"_type": "tag", "name": "draw", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^  function draw(ctx) {$/", "language": "JavaScript", "kind": "function", "signature": "(ctx)", "scope": "BuildingBlocks", "scopeKind": "function"}, {"_type": "tag", "name": "drawBlock", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^  function drawBlock(ctx, b) {$/", "language": "JavaScript", "kind": "function", "signature": "(ctx, b)", "scope": "BuildingBlocks", "scopeKind": "function"}, {"_type": "tag", "name": "dropBlock", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^  function dropBlock() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "BuildingBlocks", "scopeKind": "function"}, {"_type": "tag", "name": "h", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^            h: mb.h,$/", "language": "JavaScript", "kind": "property", "scope": "BuildingBlocks.update.snapped", "scopeKind": "class"}, {"_type": "tag", "name": "h", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^      h: BLOCK_HEIGHT,$/", "language": "JavaScript", "kind": "property", "scope": "BuildingBlocks.init.base", "scopeKind": "class"}, {"_type": "tag", "name": "height", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^          height={height}$/", "language": "JavaScript", "kind": "field", "scope": "BuildingBlocks.height", "scopeKind": "class"}, {"_type": "tag", "name": "init", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^  function init() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "BuildingBlocks", "scopeKind": "function"}, {"_type": "tag", "name": "rectsOverlap", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^  function rectsOverlap(a, b) {$/", "language": "JavaScript", "kind": "function", "signature": "(a, b)", "scope": "BuildingBlocks", "scopeKind": "function"}, {"_type": "tag", "name": "reset", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^          onClick={reset}$/", "language": "JavaScript", "kind": "field", "scope": "BuildingBlocks.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "reset", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^  function reset() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "BuildingBlocks", "scopeKind": "function"}, {"_type": "tag", "name": "snapped", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^          const snapped = {$/", "language": "JavaScript", "kind": "class", "scope": "BuildingBlocks.update", "scopeKind": "class"}, {"_type": "tag", "name": "topOfStack", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^  function topOfStack() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "BuildingBlocks", "scopeKind": "function"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^  function update(dt) {$/", "language": "JavaScript", "kind": "function", "signature": "(dt)", "scope": "BuildingBlocks", "scopeKind": "function"}, {"_type": "tag", "name": "w", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^            w: mb.w,$/", "language": "JavaScript", "kind": "property", "scope": "BuildingBlocks.update.snapped", "scopeKind": "class"}, {"_type": "tag", "name": "w", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^      w: width,$/", "language": "JavaScript", "kind": "property", "scope": "BuildingBlocks.init.base", "scopeKind": "class"}, {"_type": "tag", "name": "width", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^          width={width}$/", "language": "JavaScript", "kind": "field", "scope": "BuildingBlocks.width", "scopeKind": "class"}, {"_type": "tag", "name": "x", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^            x: mb.x,$/", "language": "JavaScript", "kind": "property", "scope": "BuildingBlocks.update.snapped", "scopeKind": "class"}, {"_type": "tag", "name": "x", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^      x: 0,$/", "language": "JavaScript", "kind": "property", "scope": "BuildingBlocks.init.base", "scopeKind": "class"}, {"_type": "tag", "name": "x", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^      x: startLeft ? margin : width - margin - w,$/", "language": "JavaScript", "kind": "property", "scope": "movingRef.current", "scopeKind": "class"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^            y: top.y - mb.h,$/", "language": "JavaScript", "kind": "property", "scope": "BuildingBlocks.update.snapped", "scopeKind": "class"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^      y,$/", "language": "JavaScript", "kind": "field", "scope": "movingRef.current", "scopeKind": "class"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/game-development-suite-snake-and-racing-games-223146-223155/frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "pattern": "/^      y: height - BLOCK_HEIGHT,$/", "language": "JavaScript", "kind": "property", "scope": "BuildingBlocks.init.base", "scopeKind": "class"}], "hash": "532fa5ffda7e90771cbc329999950c5b", "format-version": 4, "code-base-name": "frontend_games_ui", "filename": "frontend_games_ui/src/games/blocks/BuildingBlocks.jsx", "fields": [{"name": "tabIndex={0}", "scope": "BuildingBlocks.tabIndex", "scopeKind": "class", "description": "unavailable"}, {"name": "ref={canvasRef}", "scope": "BuildingBlocks.ref", "scopeKind": "class", "description": "unavailable"}, {"name": "color: mb.color,", "scope": "BuildingBlocks.update.snapped", "scopeKind": "class", "description": "unavailable"}, {"name": "color: \"#1E3A8A\",", "scope": "BuildingBlocks.init.base", "scopeKind": "class", "description": "unavailable"}, {"name": "h: mb.h,", "scope": "BuildingBlocks.update.snapped", "scopeKind": "class", "description": "unavailable"}, {"name": "h: BLOCK_HEIGHT,", "scope": "BuildingBlocks.init.base", "scopeKind": "class", "description": "unavailable"}, {"name": "height={height}", "scope": "BuildingBlocks.height", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={reset}", "scope": "BuildingBlocks.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "w: mb.w,", "scope": "BuildingBlocks.update.snapped", "scopeKind": "class", "description": "unavailable"}, {"name": "w: width,", "scope": "BuildingBlocks.init.base", "scopeKind": "class", "description": "unavailable"}, {"name": "width={width}", "scope": "BuildingBlocks.width", "scopeKind": "class", "description": "unavailable"}, {"name": "x: mb.x,", "scope": "BuildingBlocks.update.snapped", "scopeKind": "class", "description": "unavailable"}, {"name": "x: 0,", "scope": "BuildingBlocks.init.base", "scopeKind": "class", "description": "unavailable"}, {"name": "x: startLeft ? margin : width - margin - w,", "scope": "movingRef.current", "scopeKind": "class", "description": "unavailable"}, {"name": "y: top.y - mb.h,", "scope": "BuildingBlocks.update.snapped", "scopeKind": "class", "description": "unavailable"}, {"name": "y,", "scope": "movingRef.current", "scopeKind": "class", "description": "unavailable"}, {"name": "y: height - BLOCK_HEIGHT,", "scope": "BuildingBlocks.init.base", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"112": ""}]}